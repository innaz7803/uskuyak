
var Events=(function(){function n(){$("[data-event]").each(function(){$(this).unbind(".gtm");switch($(this).data("event")){case"filtro":$(this).bind("click.gtm",function(){r(this)});break;case"interaccion":if($(this).data("action")=="carrito"||$(this).data("action")=="detallesProducto"||$(this).data("action")=="imprimir"||$(this).data("action")=="pago"||$(this).data("action")=="masInfo"||$(this).data("action")=="grid"||$(this).data("action")=="contactPhone"||$(this).data("action")=="home"||$(this).data("action")=="cabecera"){$(this).bind("click.gtm",function(){e($(this).data("event"),$(this).data("action"),$(this).data("label"),"")})}else{if($(this).data("action")=="direccionFacturacion"||$(this).data("action")=="unsubscribe"){$(this).bind("click.gtm",function(){q(this,false)})}else{if($(this).data("action")=="ordenarPor"){if($(this).is("a")){$(this).bind("click.gtm",function(){e($(this).data("event"),$(this).data("action"),$(this).data("label"),"")})}}else{}}}break;case"redesSociales":$(this).bind("click.gtm",function(){e($(this).data("event"),$(this).data("action"),$(this).data("label"),"")});break;default:}})}function o(){var s=(100*$(window).scrollTop()/($(document).height()-$(window).height())).toFixed(0),t=FD.device;if(s>=20&&s<40&&!d("scroll_20")){e("scroll","scroll_20",t,"20")}else{if(s>=40&&s<60&&!d("scroll_40")){e("scroll","scroll_40",t,"40")}else{if(s>=60&&s<80&&!d("scroll_60")){e("scroll","scroll_60",t,"60")}else{if(s>=80&&s<100&&!d("scroll_80")){e("scroll","scroll_80",t,"80")}else{if(s==100&&!d("scroll_100")){e("scroll","scroll_100",t,"100")}}}}}}function r(s){if(!$(s).hasClass("active")){e($(s).data("event"),$(s).data("action"),$(s).data("label"),"")}}function q(t,s){if($(t).is(":checked")==s){e($(t).data("event"),$(t).data("action"),$(t).data("label"),"")}}function d(u){var t=false;try{for(i=0;i<dataLayer.length;i++){if(u==dataLayer[i].eAction){t=true;break}}}catch(s){throw new Error("EDLE: "+s.message)}finally{return t}}function e(u,w,s,v){try{if(typeof v!="undefined"&&v!=null&&v.length>0){dataLayer.push({eAction:w,eLabel:s,eValue:v,event:u})}else{dataLayer.push({eAction:w,eLabel:s,event:u})}}catch(t){}}function b(t){if(showImpressions){var v;if(!$.isEmptyObject(t)){v=t}else{t=prodImpressions}if(!$.isEmptyObject(t)){try{var s={ecommerce:{currencyCode:FD.currency,impressions:[]}};$.each(t,function(){s.ecommerce.impressions.push(this)});if(j("ecommerce",dataLayer)){e("interaccion","click","ajax","")}dataLayer.push(s)}catch(u){}}}}function j(s,u){var t=false;$.each(u,function(v,w){if(w.hasOwnProperty(s)){t=true;return false}});return t}function m(s){$("[data-product]").each(function(){$(this).bind("click.eecom",function(u){u.preventDefault();var v=$(this).data("product");if($.isEmptyObject(s)){s=prodImpressions}var t=$.grep(s,function(w){return w.id==v})[0];if(typeof t!="undefined"&&t!=null){if(typeof $(this).attr("href")!="undefined"&&$(this).attr("href")!=null){t.url=$(this).attr("href");t.target=(typeof $(this).attr("target")!="undefined"&&$(this).attr("target")!=null)?$(this).attr("target"):""}else{t.url=$(this).find("a").attr("href");t.target=(typeof $(this).find("a").attr("target")!="undefined"&&$(this).find("a").attr("target")!=null)?$(this).find("a").attr("target"):""}h(t,function(w,x){if(x=="_blank"){window.open(w,"_blank")}else{document.location=w}})}else{}})})}function h(u,t){try{dataLayer.push({event:"productClick",ecommerce:{click:{actionField:{list:u.list},products:[{name:u.name,id:u.id,price:u.price,brand:u.brand,category:u.category,variant:u.variant,position:u.position}]}},eventCallback:function(){if(typeof t!="undefined"&&t!=null){t(u.url,u.target)}}})}catch(s){throw new Error("ADCDL: "+s.message)}finally{if(window.ga&&ga.loaded){}else{if(typeof t!="undefined"&&t!=null){t(u.url,u.target)}}}}function g(s){dataLayer.push({ecommerce:{detail:{actionField:{list:s.list},products:[{name:s.name,id:s.id,price:s.price,brand:s.brand,category:s.category,variant:s.variant,}]}}})}function c(w,x,v){var t=$.grep(prodImpressions,function(y){return y.id==w})[0];try{if(typeof t=="undefined"&&t==null){t=productView}}catch(u){}if(typeof t!="undefined"&&t!=null){try{dataLayer.push({event:"addToCart",ecommerce:{currency:FD.currency,add:{actionField:{list:t.list},products:[{name:t.name,id:t.id,price:t.price,brand:t.brand,category:t.category,variant:t.variant,quantity:x}]}},eventCallback:function(){if(typeof v!="undefined"&&v!=null){v()}}})}catch(s){throw new Error("ASCDL: "+s.message)}finally{if(window.ga&&ga.loaded){}else{if(typeof v!="undefined"&&v!=null){v()}}}}}function p(s,x,v){var w=[];var u;$.each(s,function(z,y){var C=y.cod_producto;if(z==0){u=$.grep(prodImpressions,function(D){return D.id==C})[0];try{if(typeof u=="undefined"&&u==null){u=productView}}catch(B){}w.push({name:u.name,id:u.id,price:u.price,brand:u.brand,category:u.category,variant:u.variant,quantity:x})}else{var A;A=$.grep(prodImpressions,function(D){return D.id==C})[0];if(!(typeof u=="undefined"&&u==null)){w.push({name:A.name,id:A.id,price:A.price,brand:A.brand,category:A.category,variant:A.variant,quantity:x})}}});if(w.length>0){try{dataLayer.push({event:"addPackToCart",ecommerce:{currency:FD.currency,add:{actionField:{list:u.list},products:w}},eventCallback:function(){if(typeof v!="undefined"&&v!=null){v()}}})}catch(t){throw new Error("ASCDL: "+t.message)}finally{if(window.ga&&ga.loaded){}else{if(typeof v!="undefined"&&v!=null){v()}}}}}function l(v,w,u){var t=$.grep(prodImpressions,function(x){return x.id==v})[0];if(typeof t!="undefined"&&t!=null){try{dataLayer.push({event:"removeFromCart",ecommerce:{remove:{actionField:{list:t.list},products:[{name:t.name,id:t.id,price:t.price,brand:t.brand,category:t.category,variant:t.variant,quantity:w}]}},eventCallback:function(){if(typeof u!="undefined"&&u!=null){u()}}})}catch(s){throw new Error("RSCDL: "+s.message)}finally{if(window.ga&&ga.loaded){}else{if(typeof u!="undefined"&&u!=null){u()}}}}}function a(v){try{if(FD.cart){var s={event:"checkout",ecommerce:{checkout:{actionField:{step:v},products:[]}}};var t=prodImpressions;$.each(t,function(){s.ecommerce.checkout.products.push({name:this.name,id:this.id,price:this.price,brand:this.brand,category:this.category,variant:this.variant,quantity:this.cantidad})});dataLayer.push(s)}}catch(u){}}function k(u){try{var s={ecommerce:{purchase:{actionField:{id:u.id,affiliation:u.affiliation,revenue:u.revenue,tax:u.tax,shipping:u.shipping,coupon:u.coupon,paymentMethod:u.paymentMethod},products:[]}}};$.each(prodImpressions,function(){s.ecommerce.purchase.products.push({name:this.name,id:this.id,price:this.price,brand:this.brand,category:this.category,variant:this.variant,quantity:this.cantidad})});dataLayer.push(s)}catch(t){}}function f(t,u,s){try{if(typeof(dataLayer)!="undefined"&&typeof(t)!="undefined"&&t!=""&&typeof(u)!="undefined"&&u!=""){dataLayer.push({formName:t,formError:s||"",formEvent:u,event:"seguimiento formularios"})}}catch(v){}}return{onReadyEvents:function(){$(window).bind("scroll",function(){o()});n();b();m()},addListeners:function(s){n();b(s);m(s)},addDLEvent:function(t,v,s,u){e(t,v,s,u)},addProductViewDL:function(s){g(s)},addShoppingCartDL:function(t,u,s){c(t,u,s)},addShoppingCartPackDL:function(s,u,t){p(s,u,t)},remShoppingCartDL:function(t,u,s){l(t,u,s)},addFunnelStepDL:function(t){a(t)},addPurchaseDL:function(s){k(s)},seguimientoFormularios:function(t,u,s){f(t,u,s)}}})();