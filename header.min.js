
var widgetSubs;var catpchaScript=false;$(document).ready(function(){try{var a=navigator.userAgent.toLowerCase();$("#main-nav .subcategoria.especial li:nth-child(2n)").after('<li class="clr"></li>');$("header .show-filter").click(function(){$("header nav").toggle();return false});ModalLayer.onReadyModal("checkout_layer");FDModals.paintLayer("cart_layer");Events.onReadyEvents();$("#f_subscription_form").validate({errorElement:"div",errorClass:"form-validation error"})}catch(b){throw new Error("HDR: "+b.message)}});function deplegarMenu(c,a){try{if(a){if($(c).parent().find(".submenu").hasClass("fade-menu")){$(c).parent().parent().find(".submenu").removeClass("fade-menu")}else{$(c).parent().parent().find(".submenu").removeClass("fade-menu");$(c).parent().find(".submenu").addClass("fade-menu")}}else{$(c).parent().find(".submenu").toggleClass("fade-menu")}}catch(b){throw new Error("HDDM: "+b.message)}}jQuery.fn.reset=function(){$(this).each(function(){$("div.error",this).remove();$(".error",this).removeClass("error");$(".valid",this).removeClass("valid");this.reset()})};function showSubscriptionForm(){$("#subs_text").html("");$("#f_subscription_form").reset();$("#f_subscription_form").show()}function checkSubscription(){return($("#f_subscription_form").valid())}function testCaptcha(b){$("#recapSubs").css("display","none");if($("#f_subscription_form_rc").valid()){if(document.forms.f_subscription_form_rc["condiciones_news"].checked){document.forms.f_subscription_form_rc["consentimiento_rgpd_nw"].value="S"}else{document.forms.f_subscription_form_rc["consentimiento_rgpd_nw"].value="N"}var a=grecaptcha.getResponse(widgetSubs);if(a!=""){$(b).submit();closeCaptchaLayer();grecaptcha.reset(widgetSubs)}else{$("#recapSubs").css("display","block")}}}function loadRecaptcha(a){if(!catpchaScript){if(a!=undefined){$.getScript("//www.google.com/recaptcha/api.js?render=explicit",a)}else{$.getScript("//www.google.com/recaptcha/api.js?render=explicit")}catpchaScript=true}}function showCaptchaLayer(i,a,b,d,g){try{if(!checkSubscription()){return false}else{var j="#"+i;var e="<div id='antispam'><div class='inner'><a href='javascript:closeCaptchaLayer();' class='btn cerrar'>x</a>";e+="<form id='"+i+"_rc' name='"+i+"_rc' method='post' accept-charset='utf-8'><input type='hidden' name='ajax' id='ajax' value='ajax' /><input type='hidden' name='accion' id='accion'  value='"+$(j+" #accion").val()+"' /><input type='hidden' name='ct' id='ct' value='"+$(j+" #ct").val()+"' /><input type='hidden' name='cod_grupo_clientes' id='cod_grupo_clientes' value='"+$(j+" #cod_grupo_clientes").val()+"'/><input type='hidden' name='cod_idioma' id='cod_idioma'  value='"+$(j+" #cod_idioma").val()+"' /><input type='hidden' id='cod_pais' name='cod_pais' value='"+$(j+" #cod_pais").val()+"' /><input type='hidden' id='subs_name' name='subs_name' value='"+$(j+" #subs_name").val()+"' /><input type='hidden' id='subs_mail' name='subs_mail' value='"+$(j+" #subs_mail").val()+"' /><input type='hidden' name='urlVuelta' id='urlVuelta' value='' /><input type='hidden' name='consentimiento_rgpd_nw' id='consentimiento_rgpd_nw' value='' />";e+="<div class='human-check' ><div id='rcSubs'></div><p id='recapSubs' style='display:none;color:red;'>"+b+"</p></div><br />";e+='<p class="condiciones label-check "><input type="checkbox" name="condiciones_news" id="condiciones_news" class="check {required:true} checkbox"><label for="condiciones_news"><span>'+g+"</span></label></p>";e+="<div class='botonera'>";e+='<a class="boton small" href="javascript:testCaptcha(\''+j+"_rc');\">"+a+"</a>";e+="<div class='clr'></div></form>";e+='</div><div class="container"><div class="legal-content inner col-8-8 center-block"><div class="form-notes" style="height: 60px; overflow: hidden;">'+d+'</div><div class="text-center bottom-mask"><span class="icon"></span></div></div></div></div>';ModalLayer.fillModal(e);$(".bottom-mask").on("click",function(){$(".bottom-mask").children("span").toggleClass("inverse");if($(".bottom-mask").children("span").attr("class").indexOf("inverse")>0){$(".bottom-mask").parent().children(".form-notes").get(0).style="height: auto;"}else{$(".bottom-mask").parent().children(".form-notes").get(0).style="height: 60px; overflow: hidden;"}});widgetSubs=grecaptcha.render("rcSubs",{sitekey:"6LewsRoUAAAAAHOokec2HF0aPHoPsdCQe_3q8UYs",theme:"light",hl:$(j+" #cod_idioma").val()});var h=Math.random();ModalLayer.showModal();$(j+"_rc").ajaxForm({target:"#subs_text",success:showResponse,error:showResponse,url:"/GeneralActionServlet?al="+h,timeout:10000,contentType:"application/x-www-form-urlencoded; charset=<%=charset%>",type:"POST",clearForm:true});return true}}catch(c){throw new Error("HDSCL: "+c.message)}}function closeCaptchaLayer(){ModalLayer.cancelModal()}function showResponse(b,c,d,a){$("#subs_text").html(b);$("#f_subscription_form").hide();return true};